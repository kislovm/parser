{% extends "layout.html" %}

{% block title %}Топ статей{% endblock %}

{% block content %}
    <p>
        <a href="/dictionaries/">Словари</a>
    </p>
    {% if articles %}
        {% for a in articles %}
            <div class="article">
                <div class="link-holder">
                    <a href="{{ a.article.url }}">{{ a.article.url }}</a>
                    <span>({{ a.sum }} вхождений из словаря)</span>
                </div>
                <div class="article-content">{{ a.article.article }}</div>
            </div>
        {% endfor %}
    {% endif %}
    {% if dict %}
        <script>
        var dict = {{ dict|safe }}
          $(function() {
            $('.article-content').each(function(i, article) {
                var el = $(article);
                dict.forEach(function(val) {
                    el.html(el.html().replace(" " + val + " ", '<span class="highlight">$&</span>')) });
                });

        });
        </script>
    {% endif %}
{% endblock %}